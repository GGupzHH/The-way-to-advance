# model-2 ES新特性与TypeScript、JS性能优化


## 一 请输出下列最终执行结果，并解释为什么
  - 代码
    ```js
      var a = []
      for (var i = 0; i < 10; i++) {
        a[i] = function () {
          console.log(i)
        }
      }

      a[6]()
    ```
  - 解释
    ```txt
      a[6]() // 10
      因为for循环定义的循环变量使用var定义，var在for循环里面定义的变量是挂载到全局的
      当循环结束之后这个变量并没有被销毁，在调用a[6]()这个函数的时候，而这里的i是已经完成循环的 所以是10
      
      如果想输出6
      方法一: let let作用域是块级的  for也会产生一个块级作用域 在函数声明的时候函数内部存在一个对当前i的引用
      方法二: 闭包 将函数声明的地方使用闭包，这样就将当前i的值作为一个参数传入
      方法三: 使用setTimeout包裹函数声明  setTimeout有第三个参数，第三个参数会直接作为参数传入 但是这里使用settimeout会变成异步执行 并不能立即得到结果 想要得到正确的结果需要使用Promise解决异步
    ```

## 二 请输出下列最终执行结果，并解释为什么
  - 代码
    ```js
      var tmp = 123

      if(true) {
        console.log(tmp)
        let tmp
      }
    ```
  - 解释
    ```txt
    // Error 报错
    原因: var声明的变量是全局的，if判断默认执行 形成一个块级作用域 console.log(tmp) 因为当前if形成的作用域内存在tmp变量 但是变量还没有声明，let定义的变量不能在当前作用域内声明之前使用(暂时性死区)
    ```
    
## 三 结合ES6新语法，用最简单的方式找出数组中的最小值
  - 代码
    ```js
      var arr = [12, 34, 32, 89, 4]
    ```
  - 实现
    ```js
      let [ firstItem ] = arr.sort((a, b) => a - b)
    ```
    
## 四 请详细描述var, let, const三种声明变量的方式之间的具体差别
  ```txt
    var: 从js诞生就存在的声明变量的关键词，var声明的变量是在当前域的变量(如果是函数内部声明则是局部变量) var声明会存在变量提升，也就是可以在声明之前使用，但是值为undefined

    let、const: ECMAScript2015提出的新的声明变量的关键词，相对于var，let、const不存在变量提升，如果在声明之前使用会造成暂时性死区(程序执行错误，停止执行)，而且let、const有了新的作用域使用定义，也就是块级作用域(每一个{}都会形成一个块级作用域)，而且只在当前块级作用域生效，let声明的变量可以任意改变，const声明常量，声明之后不能改变(声明对象类型，因为只是保存了对象的内存地址，所以不管对象内部怎么变化都可以)
  ```

## 五 请输出下列最终执行结果，并解释为什么
  - 代码
    ```js
      var a = 10
      var obj = {
        a: 20,
        fn() {
          setTimeout(() => {
            console.log(this.a)
          })
        }
      }
      obj.fn()
    ```
  - 解释
    ```txt
      obj.fn() // 20
      因为是obj调用的fn函数  那么函数内部的this指向的是当前的对象obj
      也就是说fn函数内部的this指向的是obj对象，然后setTimeout回调函数是一个箭头函数
      箭头函数不存在this 当箭头函数内部使用this的时候 此时会去当前箭头函数声明的作用域找this 而声明这个箭头函数的作用域就是fn函数内部的作用域 所以this.a  就相当于在fn函数内部this.a  也就是obj.a
    ```

## 六 简述Symbol类型的用途

## 七 说说什么是浅拷贝、深拷贝

## 八 简述TS JS之间的关系

## 九 谈谈你所认识TS的优缺点

## 十 描述引用计数的原理和优缺点

## 十一 描述标记整理算法的工作流程

## 十二 描述V8中新生代存储区垃圾回收的流程

## 十二 描述增量标记算法在何时使用及工作原理
